{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst DelegatedModule = require(\"./DelegatedModule\");\n\n/** @typedef {import(\"../declarations/plugins/DllReferencePlugin\").DllReferencePluginOptions} DllReferencePluginOptions */\n/** @typedef {import(\"../declarations/plugins/DllReferencePlugin\").DllReferencePluginOptionsContent} DllReferencePluginOptionsContent */\n/** @typedef {import(\"./DelegatedModule\").Data} Data */\n/** @typedef {import(\"./DelegatedModule\").SourceRequest} SourceRequest */\n/** @typedef {import(\"./DelegatedModule\").Type} Type */\n/** @typedef {import(\"./NormalModuleFactory\")} NormalModuleFactory */\n\n/**\n * @typedef {object} Options\n * @property {SourceRequest} source source\n * @property {NonNullable<DllReferencePluginOptions[\"context\"]>} context absolute context path to which lib ident is relative to\n * @property {DllReferencePluginOptionsContent} content content\n * @property {DllReferencePluginOptions[\"type\"]} type type\n * @property {DllReferencePluginOptions[\"extensions\"]} extensions extensions\n * @property {DllReferencePluginOptions[\"scope\"]} scope scope\n * @property {object=} associatedObjectForCache object for caching\n */\n\nclass DelegatedModuleFactoryPlugin {\n  /**\n   * @param {Options} options options\n   */\n  constructor(options) {\n    this.options = options;\n    options.type = options.type || \"require\";\n    options.extensions = options.extensions || [\"\", \".js\", \".json\", \".wasm\"];\n  }\n\n  /**\n   * @param {NormalModuleFactory} normalModuleFactory the normal module factory\n   * @returns {void}\n   */\n  apply(normalModuleFactory) {\n    const scope = this.options.scope;\n    if (scope) {\n      normalModuleFactory.hooks.factorize.tapAsync(\"DelegatedModuleFactoryPlugin\", (data, callback) => {\n        const [dependency] = data.dependencies;\n        const {\n          request\n        } = dependency;\n        if (request && request.startsWith(`${scope}/`)) {\n          const innerRequest = `.${request.slice(scope.length)}`;\n          let resolved;\n          if (innerRequest in this.options.content) {\n            resolved = this.options.content[innerRequest];\n            return callback(null, new DelegatedModule(this.options.source, resolved, /** @type {Type} */this.options.type, innerRequest, request));\n          }\n          const extensions = /** @type {string[]} */\n          this.options.extensions;\n          for (let i = 0; i < extensions.length; i++) {\n            const extension = extensions[i];\n            const requestPlusExt = innerRequest + extension;\n            if (requestPlusExt in this.options.content) {\n              resolved = this.options.content[requestPlusExt];\n              return callback(null, new DelegatedModule(this.options.source, resolved, /** @type {Type} */this.options.type, requestPlusExt, request + extension));\n            }\n          }\n        }\n        return callback();\n      });\n    } else {\n      normalModuleFactory.hooks.module.tap(\"DelegatedModuleFactoryPlugin\", module => {\n        const request = module.libIdent(this.options);\n        if (request && request in this.options.content) {\n          const resolved = this.options.content[request];\n          return new DelegatedModule(this.options.source, resolved, /** @type {Type} */this.options.type, request, module);\n        }\n        return module;\n      });\n    }\n  }\n}\nmodule.exports = DelegatedModuleFactoryPlugin;","map":{"version":3,"names":["DelegatedModule","require","DelegatedModuleFactoryPlugin","constructor","options","type","extensions","apply","normalModuleFactory","scope","hooks","factorize","tapAsync","data","callback","dependency","dependencies","request","startsWith","innerRequest","slice","length","resolved","content","source","i","extension","requestPlusExt","module","tap","libIdent","exports"],"sources":["C:/Users/james/Downloads/Mellowdies/mellowdies/node_modules/webpack/lib/DelegatedModuleFactoryPlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst DelegatedModule = require(\"./DelegatedModule\");\n\n/** @typedef {import(\"../declarations/plugins/DllReferencePlugin\").DllReferencePluginOptions} DllReferencePluginOptions */\n/** @typedef {import(\"../declarations/plugins/DllReferencePlugin\").DllReferencePluginOptionsContent} DllReferencePluginOptionsContent */\n/** @typedef {import(\"./DelegatedModule\").Data} Data */\n/** @typedef {import(\"./DelegatedModule\").SourceRequest} SourceRequest */\n/** @typedef {import(\"./DelegatedModule\").Type} Type */\n/** @typedef {import(\"./NormalModuleFactory\")} NormalModuleFactory */\n\n/**\n * @typedef {object} Options\n * @property {SourceRequest} source source\n * @property {NonNullable<DllReferencePluginOptions[\"context\"]>} context absolute context path to which lib ident is relative to\n * @property {DllReferencePluginOptionsContent} content content\n * @property {DllReferencePluginOptions[\"type\"]} type type\n * @property {DllReferencePluginOptions[\"extensions\"]} extensions extensions\n * @property {DllReferencePluginOptions[\"scope\"]} scope scope\n * @property {object=} associatedObjectForCache object for caching\n */\n\nclass DelegatedModuleFactoryPlugin {\n\t/**\n\t * @param {Options} options options\n\t */\n\tconstructor(options) {\n\t\tthis.options = options;\n\t\toptions.type = options.type || \"require\";\n\t\toptions.extensions = options.extensions || [\"\", \".js\", \".json\", \".wasm\"];\n\t}\n\n\t/**\n\t * @param {NormalModuleFactory} normalModuleFactory the normal module factory\n\t * @returns {void}\n\t */\n\tapply(normalModuleFactory) {\n\t\tconst scope = this.options.scope;\n\t\tif (scope) {\n\t\t\tnormalModuleFactory.hooks.factorize.tapAsync(\n\t\t\t\t\"DelegatedModuleFactoryPlugin\",\n\t\t\t\t(data, callback) => {\n\t\t\t\t\tconst [dependency] = data.dependencies;\n\t\t\t\t\tconst { request } = dependency;\n\t\t\t\t\tif (request && request.startsWith(`${scope}/`)) {\n\t\t\t\t\t\tconst innerRequest = `.${request.slice(scope.length)}`;\n\t\t\t\t\t\tlet resolved;\n\t\t\t\t\t\tif (innerRequest in this.options.content) {\n\t\t\t\t\t\t\tresolved = this.options.content[innerRequest];\n\t\t\t\t\t\t\treturn callback(\n\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\tnew DelegatedModule(\n\t\t\t\t\t\t\t\t\tthis.options.source,\n\t\t\t\t\t\t\t\t\tresolved,\n\t\t\t\t\t\t\t\t\t/** @type {Type} */ (this.options.type),\n\t\t\t\t\t\t\t\t\tinnerRequest,\n\t\t\t\t\t\t\t\t\trequest\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst extensions =\n\t\t\t\t\t\t\t/** @type {string[]} */\n\t\t\t\t\t\t\t(this.options.extensions);\n\t\t\t\t\t\tfor (let i = 0; i < extensions.length; i++) {\n\t\t\t\t\t\t\tconst extension = extensions[i];\n\t\t\t\t\t\t\tconst requestPlusExt = innerRequest + extension;\n\t\t\t\t\t\t\tif (requestPlusExt in this.options.content) {\n\t\t\t\t\t\t\t\tresolved = this.options.content[requestPlusExt];\n\t\t\t\t\t\t\t\treturn callback(\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\tnew DelegatedModule(\n\t\t\t\t\t\t\t\t\t\tthis.options.source,\n\t\t\t\t\t\t\t\t\t\tresolved,\n\t\t\t\t\t\t\t\t\t\t/** @type {Type} */ (this.options.type),\n\t\t\t\t\t\t\t\t\t\trequestPlusExt,\n\t\t\t\t\t\t\t\t\t\trequest + extension\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn callback();\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tnormalModuleFactory.hooks.module.tap(\n\t\t\t\t\"DelegatedModuleFactoryPlugin\",\n\t\t\t\tmodule => {\n\t\t\t\t\tconst request = module.libIdent(this.options);\n\t\t\t\t\tif (request && request in this.options.content) {\n\t\t\t\t\t\tconst resolved = this.options.content[request];\n\t\t\t\t\t\treturn new DelegatedModule(\n\t\t\t\t\t\t\tthis.options.source,\n\t\t\t\t\t\t\tresolved,\n\t\t\t\t\t\t\t/** @type {Type} */ (this.options.type),\n\t\t\t\t\t\t\trequest,\n\t\t\t\t\t\t\tmodule\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn module;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n}\nmodule.exports = DelegatedModuleFactoryPlugin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}