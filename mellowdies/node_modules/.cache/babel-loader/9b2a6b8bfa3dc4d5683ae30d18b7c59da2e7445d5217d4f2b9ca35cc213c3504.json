{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").RuleSetRule} RuleSetRule */\n/** @typedef {import(\"./RuleSetCompiler\")} RuleSetCompiler */\n/** @typedef {import(\"./RuleSetCompiler\").RuleCondition} RuleCondition */\n/** @typedef {import(\"./RuleSetCompiler\").RuleConditionFunction} RuleConditionFunction */\nclass ObjectMatcherRulePlugin {\n  /**\n   * @param {string} ruleProperty the rule property\n   * @param {string=} dataProperty the data property\n   * @param {RuleConditionFunction=} additionalConditionFunction need to check\n   */\n  constructor(ruleProperty, dataProperty, additionalConditionFunction) {\n    this.ruleProperty = ruleProperty;\n    this.dataProperty = dataProperty || ruleProperty;\n    this.additionalConditionFunction = additionalConditionFunction;\n  }\n\n  /**\n   * @param {RuleSetCompiler} ruleSetCompiler the rule set compiler\n   * @returns {void}\n   */\n  apply(ruleSetCompiler) {\n    const {\n      ruleProperty,\n      dataProperty\n    } = this;\n    ruleSetCompiler.hooks.rule.tap(\"ObjectMatcherRulePlugin\", (path, rule, unhandledProperties, result) => {\n      if (unhandledProperties.has(ruleProperty)) {\n        unhandledProperties.delete(ruleProperty);\n        const value = /** @type {Record<string, any>} */\n        rule[(/** @type {keyof RuleSetRule} */ruleProperty)];\n        for (const property of Object.keys(value)) {\n          const nestedDataProperties = property.split(\".\");\n          const condition = ruleSetCompiler.compileCondition(`${path}.${ruleProperty}.${property}`, value[property]);\n          if (this.additionalConditionFunction) {\n            result.conditions.push({\n              property: [dataProperty],\n              matchWhenEmpty: condition.matchWhenEmpty,\n              fn: this.additionalConditionFunction\n            });\n          }\n          result.conditions.push({\n            property: [dataProperty, ...nestedDataProperties],\n            matchWhenEmpty: condition.matchWhenEmpty,\n            fn: condition.fn\n          });\n        }\n      }\n    });\n  }\n}\nmodule.exports = ObjectMatcherRulePlugin;","map":{"version":3,"names":["ObjectMatcherRulePlugin","constructor","ruleProperty","dataProperty","additionalConditionFunction","apply","ruleSetCompiler","hooks","rule","tap","path","unhandledProperties","result","has","delete","value","property","Object","keys","nestedDataProperties","split","condition","compileCondition","conditions","push","matchWhenEmpty","fn","module","exports"],"sources":["C:/Users/james/Downloads/Mellowdies/mellowdies/node_modules/webpack/lib/rules/ObjectMatcherRulePlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\n/** @typedef {import(\"../../declarations/WebpackOptions\").RuleSetRule} RuleSetRule */\n/** @typedef {import(\"./RuleSetCompiler\")} RuleSetCompiler */\n/** @typedef {import(\"./RuleSetCompiler\").RuleCondition} RuleCondition */\n/** @typedef {import(\"./RuleSetCompiler\").RuleConditionFunction} RuleConditionFunction */\n\nclass ObjectMatcherRulePlugin {\n\t/**\n\t * @param {string} ruleProperty the rule property\n\t * @param {string=} dataProperty the data property\n\t * @param {RuleConditionFunction=} additionalConditionFunction need to check\n\t */\n\tconstructor(ruleProperty, dataProperty, additionalConditionFunction) {\n\t\tthis.ruleProperty = ruleProperty;\n\t\tthis.dataProperty = dataProperty || ruleProperty;\n\t\tthis.additionalConditionFunction = additionalConditionFunction;\n\t}\n\n\t/**\n\t * @param {RuleSetCompiler} ruleSetCompiler the rule set compiler\n\t * @returns {void}\n\t */\n\tapply(ruleSetCompiler) {\n\t\tconst { ruleProperty, dataProperty } = this;\n\t\truleSetCompiler.hooks.rule.tap(\n\t\t\t\"ObjectMatcherRulePlugin\",\n\t\t\t(path, rule, unhandledProperties, result) => {\n\t\t\t\tif (unhandledProperties.has(ruleProperty)) {\n\t\t\t\t\tunhandledProperties.delete(ruleProperty);\n\t\t\t\t\tconst value =\n\t\t\t\t\t\t/** @type {Record<string, any>} */\n\t\t\t\t\t\t(rule[/** @type {keyof RuleSetRule} */ (ruleProperty)]);\n\t\t\t\t\tfor (const property of Object.keys(value)) {\n\t\t\t\t\t\tconst nestedDataProperties = property.split(\".\");\n\t\t\t\t\t\tconst condition = ruleSetCompiler.compileCondition(\n\t\t\t\t\t\t\t`${path}.${ruleProperty}.${property}`,\n\t\t\t\t\t\t\tvalue[property]\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (this.additionalConditionFunction) {\n\t\t\t\t\t\t\tresult.conditions.push({\n\t\t\t\t\t\t\t\tproperty: [dataProperty],\n\t\t\t\t\t\t\t\tmatchWhenEmpty: condition.matchWhenEmpty,\n\t\t\t\t\t\t\t\tfn: this.additionalConditionFunction\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult.conditions.push({\n\t\t\t\t\t\t\tproperty: [dataProperty, ...nestedDataProperties],\n\t\t\t\t\t\t\tmatchWhenEmpty: condition.matchWhenEmpty,\n\t\t\t\t\t\t\tfn: condition.fn\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = ObjectMatcherRulePlugin;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ;AACA;AACA;AACA;AAEA,MAAMA,uBAAuB,CAAC;EAC7B;AACD;AACA;AACA;AACA;EACCC,WAAWA,CAACC,YAAY,EAAEC,YAAY,EAAEC,2BAA2B,EAAE;IACpE,IAAI,CAACF,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACC,YAAY,GAAGA,YAAY,IAAID,YAAY;IAChD,IAAI,CAACE,2BAA2B,GAAGA,2BAA2B;EAC/D;;EAEA;AACD;AACA;AACA;EACCC,KAAKA,CAACC,eAAe,EAAE;IACtB,MAAM;MAAEJ,YAAY;MAAEC;IAAa,CAAC,GAAG,IAAI;IAC3CG,eAAe,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,CAC7B,yBAAyB,EACzB,CAACC,IAAI,EAAEF,IAAI,EAAEG,mBAAmB,EAAEC,MAAM,KAAK;MAC5C,IAAID,mBAAmB,CAACE,GAAG,CAACX,YAAY,CAAC,EAAE;QAC1CS,mBAAmB,CAACG,MAAM,CAACZ,YAAY,CAAC;QACxC,MAAMa,KAAK,GACV;QACCP,IAAI,EAAC,gCAAkCN,YAAY,EAAG;QACxD,KAAK,MAAMc,QAAQ,IAAIC,MAAM,CAACC,IAAI,CAACH,KAAK,CAAC,EAAE;UAC1C,MAAMI,oBAAoB,GAAGH,QAAQ,CAACI,KAAK,CAAC,GAAG,CAAC;UAChD,MAAMC,SAAS,GAAGf,eAAe,CAACgB,gBAAgB,CACjD,GAAGZ,IAAI,IAAIR,YAAY,IAAIc,QAAQ,EAAE,EACrCD,KAAK,CAACC,QAAQ,CACf,CAAC;UACD,IAAI,IAAI,CAACZ,2BAA2B,EAAE;YACrCQ,MAAM,CAACW,UAAU,CAACC,IAAI,CAAC;cACtBR,QAAQ,EAAE,CAACb,YAAY,CAAC;cACxBsB,cAAc,EAAEJ,SAAS,CAACI,cAAc;cACxCC,EAAE,EAAE,IAAI,CAACtB;YACV,CAAC,CAAC;UACH;UACAQ,MAAM,CAACW,UAAU,CAACC,IAAI,CAAC;YACtBR,QAAQ,EAAE,CAACb,YAAY,EAAE,GAAGgB,oBAAoB,CAAC;YACjDM,cAAc,EAAEJ,SAAS,CAACI,cAAc;YACxCC,EAAE,EAAEL,SAAS,CAACK;UACf,CAAC,CAAC;QACH;MACD;IACD,CACD,CAAC;EACF;AACD;AAEAC,MAAM,CAACC,OAAO,GAAG5B,uBAAuB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}