{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\elect\\\\Documents\\\\CIS\\\\4914\\\\Mellowdies\\\\mellowdies\\\\src\\\\Landingpage\\\\Ai.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst menubackground = {/* styles remain unchanged */};\nconst generateButtonStyle = {/* styles remain unchanged */};\nconst descriptionBoxStyle = {/* styles remain unchanged */};\nconst backButtonStyle = {/* styles remain unchanged */};\nconst contentStyle = {/* styles remain unchanged */};\nvar toWav = require('audiobuffer-to-wav');\nvar slicer = require('audiobuffer-slice');\nlet slice = null;\nfunction bufferToWavURL(buffer) {\n  var blob = new window.Blob([new DataView(toWav(buffer))], {\n    type: \"audio/wav\"\n  });\n  wavURL = window.URL.createObjectURL(blob);\n  return wavURL;\n}\nfunction getAudioSlice(buffer, region) {\n  slicer(buffer, region.start * 1000, region.end * 1000, function (error, slicedBuffer) {\n    if (error) {\n      console.error(error);\n      return;\n    } else {\n      slice = slicedBuffer;\n      wavURL = bufferToWavURL(slice);\n    }\n  });\n}\nfunction AIMenu({\n  handleBack,\n  waveData\n}) {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [description, setDescription] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [progressMessage, setProgressMessage] = useState(null);\n  const [sendToAI, setSendToAI] = useState(null); // Checkbox state\n  let wavURL = \"\";\n  const handleGenerateMusic = async () => {\n    setLoading(true);\n    setErrorMessage(null);\n    setProgressMessage(\"Connecting to the server...\");\n    if (sendToAI != null) {\n      let buffer = waveData[0].waveSurfer.getDecodedData();\n      let region = waveData[0].regions.getRegions()[0];\n      let sliceBuffer = getAudioSlice(buffer, region);\n      wavURL = bufferToWavURL(sliceBuffer);\n    }\n    try {\n      const response = await fetch(\"http://localhost:3001/api/generate-music\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          description,\n          wavURL\n        }) // Send checkbox value to server\n      });\n      if (!response.ok) {\n        throw new Error(\"Server failed to generate music.\");\n      }\n      setProgressMessage(\"Generating music on server...\");\n      const blob = await response.blob();\n      setProgressMessage(\"Downloading generated music file...\");\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = `${description}_generated_music.wav`;\n\n      // Trigger download\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n      URL.revokeObjectURL(url);\n      setProgressMessage(\"Download complete. Check your Downloads folder.\");\n    } catch (error) {\n      console.error(\"Error during music generation or download:\", error);\n      setErrorMessage(`Failed to generate or download music: ${error.message}`);\n      setProgressMessage(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: menubackground,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: contentStyle,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"AI Music Generator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"red\"\n        },\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 26\n      }, this), progressMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"blue\"\n        },\n        children: progressMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        style: descriptionBoxStyle,\n        placeholder: \"Describe your music...\",\n        value: description,\n        onChange: e => setDescription(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: sendToAI,\n            onChange: e => setSendToAI(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), \"Send selected music region to AI\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: generateButtonStyle,\n        onClick: handleGenerateMusic,\n        disabled: loading,\n        children: loading ? \"Processing...\" : \"Generate Music\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: backButtonStyle,\n        onClick: handleBack,\n        children: \"Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n_s(AIMenu, \"vizcjtRtIzFtzVQEs6l5+inyRtY=\");\n_c = AIMenu;\nexport default AIMenu;\nvar _c;\n$RefreshReg$(_c, \"AIMenu\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","menubackground","generateButtonStyle","descriptionBoxStyle","backButtonStyle","contentStyle","toWav","require","slicer","slice","bufferToWavURL","buffer","blob","window","Blob","DataView","type","wavURL","URL","createObjectURL","getAudioSlice","region","start","end","error","slicedBuffer","console","AIMenu","handleBack","waveData","_s","loading","setLoading","description","setDescription","errorMessage","setErrorMessage","progressMessage","setProgressMessage","sendToAI","setSendToAI","handleGenerateMusic","waveSurfer","getDecodedData","regions","getRegions","sliceBuffer","response","fetch","method","headers","body","JSON","stringify","ok","Error","url","a","document","createElement","href","download","appendChild","click","remove","revokeObjectURL","message","style","children","fileName","_jsxFileName","lineNumber","columnNumber","color","placeholder","value","onChange","e","target","checked","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/elect/Documents/CIS/4914/Mellowdies/mellowdies/src/Landingpage/Ai.js"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst menubackground = { /* styles remain unchanged */ };\r\nconst generateButtonStyle = { /* styles remain unchanged */ };\r\nconst descriptionBoxStyle = { /* styles remain unchanged */ };\r\nconst backButtonStyle = { /* styles remain unchanged */ };\r\nconst contentStyle = { /* styles remain unchanged */ };\r\n\r\nvar toWav = require('audiobuffer-to-wav');\r\nvar slicer = require('audiobuffer-slice');\r\nlet slice = null;\r\n\r\nfunction bufferToWavURL(buffer) {\r\n  var blob = new window.Blob([new DataView(toWav(buffer))], {type: \"audio/wav\"});\r\n  wavURL = window.URL.createObjectURL(blob);\r\n  return wavURL;\r\n}\r\n\r\nfunction getAudioSlice(buffer, region) {\r\n  slicer(buffer, region.start * 1000, region.end * 1000, function(error, slicedBuffer) {\r\n      if (error) {\r\n          console.error(error);\r\n          return;\r\n      } else {\r\n        slice = slicedBuffer;\r\n        wavURL = bufferToWavURL(slice);\r\n      }\r\n  })\r\n}\r\n\r\nfunction AIMenu({ handleBack, waveData }) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [description, setDescription] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [progressMessage, setProgressMessage] = useState(null);\r\n  const [sendToAI, setSendToAI] = useState(null);  // Checkbox state\r\n  let wavURL = \"\";\r\n\r\n  const handleGenerateMusic = async () => {\r\n    setLoading(true);\r\n    setErrorMessage(null);\r\n    setProgressMessage(\"Connecting to the server...\");\r\n\r\n    if (sendToAI != null) {\r\n      let buffer = waveData[0].waveSurfer.getDecodedData();\r\n      let region = (waveData[0].regions.getRegions())[0];\r\n      let sliceBuffer = getAudioSlice(buffer, region);\r\n      wavURL = bufferToWavURL(sliceBuffer);\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:3001/api/generate-music\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ description, wavURL }),  // Send checkbox value to server\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Server failed to generate music.\");\r\n      }\r\n\r\n      setProgressMessage(\"Generating music on server...\");\r\n\r\n      const blob = await response.blob();\r\n      setProgressMessage(\"Downloading generated music file...\");\r\n\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement(\"a\");\r\n      a.href = url;\r\n      a.download = `${description}_generated_music.wav`;\r\n\r\n      // Trigger download\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      a.remove();\r\n      URL.revokeObjectURL(url);\r\n\r\n      setProgressMessage(\"Download complete. Check your Downloads folder.\");\r\n    } catch (error) {\r\n      console.error(\"Error during music generation or download:\", error);\r\n      setErrorMessage(`Failed to generate or download music: ${error.message}`);\r\n      setProgressMessage(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={menubackground}>\r\n      <div style={contentStyle}>\r\n        <h1>AI Music Generator</h1>\r\n        {errorMessage && <div style={{ color: \"red\" }}>{errorMessage}</div>}\r\n        {progressMessage && <div style={{ color: \"blue\" }}>{progressMessage}</div>}\r\n        <textarea\r\n          style={descriptionBoxStyle}\r\n          placeholder=\"Describe your music...\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n        />\r\n        <div>\r\n          <label>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={sendToAI}\r\n              onChange={(e) => setSendToAI(e.target.checked)}\r\n            />\r\n            Send selected music region to AI\r\n          </label>\r\n        </div>\r\n        <button style={generateButtonStyle} onClick={handleGenerateMusic} disabled={loading}>\r\n          {loading ? \"Processing...\" : \"Generate Music\"}\r\n        </button>\r\n        <button style={backButtonStyle} onClick={handleBack}>Back</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AIMenu;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}